# Logs Analysis Project

This repository contains the code regarding the "Logs Analysis" Project from Udacity
annodegree "Full-Stack Web Development".

The program 'logsanalysis.py', when executed, fetches data from the news database and
displays the answer to the following questions, defined in the project assignment:

1. What are the most popular three articles of all time?
2. Who are the most popular article authors of all time?
3. On which days did more than 1% of requests lead to errors?

In order to run the file and get the answers succesfully, one must first create the following views in the database:

```sql
CREATE VIEW most_popular AS
    SELECT log.path, log.status, articles.slug, articles.title, articles.id
        FROM articles JOIN log ON log.path like '%/' || slug || '%';
```
```sql
CREATE VIEW most_popular_auth AS
    SELECT articles.author, count(most_popular.id) AS views
        FROM most_popular JOIN articles ON most_popular.id = articles.id
        GROUP BY author
        ORDER BY views DESC;
```
```sql
CREATE VIEW hits AS
    SELECT time::date AS day, COUNT(time::date) AS "hits"
        FROM log
        GROUP BY day;
```

```sql
UPDATE VIEW notfound AS
    SELECT time::date as day, COUNT(time::date) AS "hits not found"
        FROM log
        WHERE status = '404 NOT FOUND'
        GROUP BY day;
```

Then it is just a matter of executing the project.py file.

The file output.txt exhibits the output generated by the program.

Thanks.
